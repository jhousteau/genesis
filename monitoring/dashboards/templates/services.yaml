services:
  - name: "user-service"
    type: "api"
    language: "python"
    framework: "fastapi"
    team: "platform"
    environment: "production"
    has_database: true
    has_cache: true
    has_queue: false
    custom_metrics:
      - "user_registrations_total"
      - "user_login_attempts_total"
      - "password_reset_requests_total"
    business_metrics:
      - "daily_active_users"
      - "user_conversion_rate"
      - "subscription_revenue"
    slos:
      - name: "Availability"
        target: 99.9
        query: '100 * (1 - sum(rate(http_requests_total{job="user-service",code=~"5.."}[28d])) / sum(rate(http_requests_total{job="user-service"}[28d])))'
      - name: "Latency"
        target: 95.0
        query: 'histogram_quantile(0.95, sum(rate(http_request_duration_seconds_bucket{job="user-service"}[5m])) by (le)) < 0.5'

  - name: "payment-service"
    type: "api"
    language: "go"
    framework: "gin"
    team: "commerce"
    environment: "production"
    has_database: true
    has_cache: false
    has_queue: true
    custom_metrics:
      - "payment_transactions_total"
      - "payment_failures_total"
      - "payment_processing_duration_seconds"
    business_metrics:
      - "transaction_volume"
      - "payment_success_rate"
      - "average_transaction_value"
    slos:
      - name: "Payment Success Rate"
        target: 99.95
        query: '100 * sum(rate(payment_transactions_total{job="payment-service",status="success"}[28d])) / sum(rate(payment_transactions_total{job="payment-service"}[28d]))'
      - name: "Payment Latency"
        target: 99.0
        query: 'histogram_quantile(0.99, sum(rate(payment_processing_duration_seconds_bucket{job="payment-service"}[5m])) by (le)) < 2.0'

  - name: "notification-service"
    type: "worker"
    language: "nodejs"
    framework: "express"
    team: "platform"
    environment: "production"
    has_database: true
    has_cache: true
    has_queue: true
    custom_metrics:
      - "notifications_sent_total"
      - "notification_delivery_failures_total"
      - "email_bounce_rate"
      - "sms_delivery_rate"
    business_metrics:
      - "daily_notifications_sent"
      - "notification_engagement_rate"
      - "delivery_cost_per_notification"
    slos:
      - name: "Notification Delivery"
        target: 99.5
        query: '100 * sum(rate(notifications_sent_total{job="notification-service",status="delivered"}[28d])) / sum(rate(notifications_sent_total{job="notification-service"}[28d]))'

  - name: "analytics-service"
    type: "api"
    language: "python"
    framework: "django"
    team: "data"
    environment: "production"
    has_database: true
    has_cache: true
    has_queue: false
    custom_metrics:
      - "events_processed_total"
      - "data_pipeline_duration_seconds"
      - "query_execution_time_seconds"
    business_metrics:
      - "events_per_day"
      - "data_processing_latency"
      - "storage_cost_per_gb"
    slos:
      - name: "Data Freshness"
        target: 95.0
        query: '100 * (time() - analytics_last_update_timestamp{job="analytics-service"}) < 300'
      - name: "Query Performance"
        target: 90.0
        query: 'histogram_quantile(0.90, sum(rate(query_execution_time_seconds_bucket{job="analytics-service"}[5m])) by (le)) < 5.0'

  - name: "frontend-app"
    type: "web"
    language: "javascript"
    framework: "react"
    team: "frontend"
    environment: "production"
    has_database: false
    has_cache: true
    has_queue: false
    custom_metrics:
      - "page_load_time_seconds"
      - "javascript_errors_total"
      - "user_interactions_total"
    business_metrics:
      - "page_views_per_day"
      - "user_session_duration"
      - "bounce_rate"
    slos:
      - name: "Page Load Time"
        target: 95.0
        query: 'histogram_quantile(0.95, sum(rate(page_load_time_seconds_bucket{job="frontend-app"}[5m])) by (le)) < 3.0'
      - name: "JavaScript Error Rate"
        target: 99.0
        query: '100 * (1 - sum(rate(javascript_errors_total{job="frontend-app"}[5m])) / sum(rate(user_interactions_total{job="frontend-app"}[5m])))'