# Genesis Test Environment Configuration
# This file contains environment-specific settings for testing

# Environment identifier
ENVIRONMENT="test"
ENVIRONMENT_TYPE="testing"

# GCP Configuration
PROJECT_ID="${PROJECT_ID_TEST:-whai-genesis-test}"
REGION="us-central1"
ZONE="us-central1-b"

# Resource naming suffix
RESOURCE_SUFFIX="test"

# Network Configuration
SUBNET_CIDR="10.20.0.0/24"
SECONDARY_RANGE_PODS="10.21.0.0/16"
SECONDARY_RANGE_SERVICES="10.22.0.0/20"

# Compute Configuration
MACHINE_TYPE="e2-standard-2"
USE_PREEMPTIBLE=true
ENABLE_PUBLIC_IP=true
MAX_INSTANCES=10

# GKE Configuration
GKE_NODE_COUNT=2
GKE_MIN_NODES=1
GKE_MAX_NODES=5
GKE_MACHINE_TYPE="e2-standard-2"
ENABLE_AUTOPILOT=false
ENABLE_WORKLOAD_IDENTITY=true

# Storage Configuration
DISK_SIZE=100
DISK_TYPE="pd-standard"
BOOT_DISK_SIZE=20
ENABLE_BACKUPS=true
BACKUP_RETENTION_DAYS=14

# Database Configuration
DB_TIER="db-f1-micro"
DB_VERSION="POSTGRES_14"
DB_BACKUP_ENABLED=true
DB_HIGH_AVAILABILITY=false
DB_STORAGE_SIZE=20

# Cost Management
MONTHLY_BUDGET=200
ALERT_THRESHOLD_PERCENT=85
AUTO_SHUTDOWN_HOURS=8
ENABLE_AUTO_SHUTDOWN=true

# Security Configuration
ENABLE_PRIVATE_GOOGLE_ACCESS=true
ENABLE_FLOW_LOGS=true
ENABLE_CLOUD_ARMOR=false
ENABLE_CLOUD_NAT=true
ENABLE_BINARY_AUTHORIZATION=false

# Monitoring Configuration
LOG_RETENTION_DAYS=14
METRIC_RETENTION_DAYS=60
ENABLE_MONITORING=true
ENABLE_LOGGING=true
ENABLE_TRACING=true
ENABLE_PROFILING=true
ENABLE_ERROR_REPORTING=true

# Test Features
ENABLE_HOT_RELOAD=false
ENABLE_DEBUG=true
ENABLE_VERBOSE_LOGGING=true
ENABLE_DEV_TOOLS=false
ENABLE_TEST_FIXTURES=true
ENABLE_MOCK_SERVICES=true

# CI/CD Configuration
ENABLE_CI_CD=true
CI_BRANCH_PATTERN="*"
DEPLOY_ON_PUSH=true
RUN_TESTS_ON_COMMIT=true
ENABLE_INTEGRATION_TESTS=true
ENABLE_E2E_TESTS=true
ENABLE_LOAD_TESTS=true

# Resource Limits
MAX_CPU_PER_CONTAINER="2"
MAX_MEMORY_PER_CONTAINER="4Gi"
MAX_STORAGE_PER_VOLUME="200Gi"

# Service URLs (test)
API_URL="https://api-test.genesis.internal"
WEB_URL="https://web-test.genesis.internal"
MONITORING_URL="https://monitoring-test.genesis.internal"

# External integrations (test endpoints)
SLACK_WEBHOOK_URL=""
PAGERDUTY_INTEGRATION_KEY=""
GITHUB_WEBHOOK_SECRET=""

# Feature flags
FEATURE_NEW_UI=true
FEATURE_ADVANCED_MONITORING=true
FEATURE_EXPERIMENTAL=true

# Scaling Configuration
MIN_REPLICAS=1
MAX_REPLICAS=5
TARGET_CPU_UTILIZATION=70

# Test tools
ENABLE_SWAGGER=true
ENABLE_GRAPHQL_PLAYGROUND=true
ENABLE_ADMIN_PANEL=true
ENABLE_TEST_DASHBOARD=true

# Cache Configuration
REDIS_ENABLED=true
REDIS_SIZE="2GB"
MEMCACHED_ENABLED=false

# Queue Configuration
PUBSUB_ENABLED=true
MAX_QUEUE_SIZE=5000
WORKER_COUNT=3

# Secrets Management
USE_SECRET_MANAGER=true
SECRET_ROTATION_DAYS=30

# Compliance
REQUIRE_ENCRYPTION_AT_REST=false
REQUIRE_ENCRYPTION_IN_TRANSIT=true
AUDIT_LOGGING_ENABLED=true

# Test Data
ENABLE_TEST_DATA_GENERATION=true
TEST_DATA_SIZE="medium"
RESET_DATA_ON_DEPLOY=true

# Terraform State
TF_STATE_BUCKET="tf-state-whai-genesis-test"
TF_STATE_PREFIX="genesis/test"

# Container Registry
CONTAINER_REGISTRY="us-central1-docker.pkg.dev"
ARTIFACT_REPOSITORY="whai-genesis-test/containers"

# Tags and Labels
DEFAULT_LABELS="environment=test,project=genesis,managed-by=terraform"
DEFAULT_TAGS="whai-genesis-test"

# Notification Settings
ALERT_EMAIL=""
ALERT_SMS=""

# Test automation
RUN_SMOKE_TESTS=true
RUN_REGRESSION_TESTS=true
TEST_COVERAGE_THRESHOLD=80

# Export environment type for scripts
export ENVIRONMENT_TYPE
