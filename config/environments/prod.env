# Genesis Production Environment Configuration
# This file contains environment-specific settings for production
# ⚠️  CRITICAL: Changes to this file affect PRODUCTION systems

# Environment identifier
ENVIRONMENT="prod"
ENVIRONMENT_TYPE="production"

# GCP Configuration
PROJECT_ID="${PROJECT_ID_PROD:-whai-genesis-prod}"
REGION="us-central1"
ZONE="us-central1-a"
MULTI_REGION_ENABLED=true
BACKUP_REGION="us-east1"

# Resource naming suffix
RESOURCE_SUFFIX="prod"

# Network Configuration
SUBNET_CIDR="10.10.0.0/24"
SECONDARY_RANGE_PODS="10.11.0.0/16"
SECONDARY_RANGE_SERVICES="10.12.0.0/20"

# Compute Configuration
MACHINE_TYPE="e2-standard-8"
USE_PREEMPTIBLE=false  # Never use preemptible in production
ENABLE_PUBLIC_IP=false  # No public IPs in production
MAX_INSTANCES=100

# GKE Configuration
GKE_NODE_COUNT=5
GKE_MIN_NODES=3
GKE_MAX_NODES=20
GKE_MACHINE_TYPE="e2-standard-4"
ENABLE_AUTOPILOT=false
ENABLE_WORKLOAD_IDENTITY=true
ENABLE_PRIVATE_CLUSTER=true

# Storage Configuration
DISK_SIZE=500
DISK_TYPE="pd-ssd"  # SSD for production performance
BOOT_DISK_SIZE=50
ENABLE_BACKUPS=true
BACKUP_RETENTION_DAYS=90
ENABLE_SNAPSHOT_SCHEDULE=true
SNAPSHOT_FREQUENCY="daily"

# Database Configuration
DB_TIER="db-n1-standard-4"
DB_VERSION="POSTGRES_14"
DB_BACKUP_ENABLED=true
DB_HIGH_AVAILABILITY=true
DB_STORAGE_SIZE=500
DB_STORAGE_AUTO_INCREASE=true
DB_POINT_IN_TIME_RECOVERY=true
DB_BACKUP_LOCATION="us"

# Cost Management
MONTHLY_BUDGET=5000
ALERT_THRESHOLD_PERCENT=80
AUTO_SHUTDOWN_HOURS=0  # Never auto-shutdown production
ENABLE_AUTO_SHUTDOWN=false

# Security Configuration
ENABLE_PRIVATE_GOOGLE_ACCESS=true
ENABLE_FLOW_LOGS=true
ENABLE_CLOUD_ARMOR=true
ENABLE_CLOUD_NAT=true
ENABLE_BINARY_AUTHORIZATION=true
ENABLE_VULNERABILITY_SCANNING=true
ENABLE_SECURITY_COMMAND_CENTER=true

# Monitoring Configuration
LOG_RETENTION_DAYS=90
METRIC_RETENTION_DAYS=365
ENABLE_MONITORING=true
ENABLE_LOGGING=true
ENABLE_TRACING=true
ENABLE_PROFILING=true
ENABLE_ERROR_REPORTING=true
ENABLE_UPTIME_CHECKS=true
ENABLE_CUSTOM_DASHBOARDS=true

# Production Features
ENABLE_HOT_RELOAD=false
ENABLE_DEBUG=false
ENABLE_VERBOSE_LOGGING=false
ENABLE_DEV_TOOLS=false

# CI/CD Configuration
ENABLE_CI_CD=true
CI_BRANCH_PATTERN="main|master|release/*"
DEPLOY_ON_PUSH=false  # Manual approval required
RUN_TESTS_ON_COMMIT=true
REQUIRE_APPROVAL=true
MIN_APPROVALS=2

# Resource Limits
MAX_CPU_PER_CONTAINER="8"
MAX_MEMORY_PER_CONTAINER="16Gi"
MAX_STORAGE_PER_VOLUME="1Ti"

# Service URLs (production)
API_URL="https://api.genesis.com"
WEB_URL="https://www.genesis.com"
MONITORING_URL="https://monitoring.genesis.com"

# External integrations
SLACK_WEBHOOK_URL="${SLACK_WEBHOOK_URL_PROD}"
PAGERDUTY_INTEGRATION_KEY="${PAGERDUTY_KEY_PROD}"
GITHUB_WEBHOOK_SECRET="${GITHUB_WEBHOOK_SECRET_PROD}"

# Feature flags
FEATURE_NEW_UI=false  # Controlled rollout
FEATURE_ADVANCED_MONITORING=true
FEATURE_EXPERIMENTAL=false  # Never in production

# Scaling Configuration
MIN_REPLICAS=3
MAX_REPLICAS=50
TARGET_CPU_UTILIZATION=60
ENABLE_HORIZONTAL_POD_AUTOSCALING=true
ENABLE_VERTICAL_POD_AUTOSCALING=true
ENABLE_CLUSTER_AUTOSCALING=true

# Production safeguards
REQUIRE_PROD_CONFIRMATION=true
ENABLE_DELETION_PROTECTION=true
ENABLE_RESOURCE_LOCKS=true

# Cache Configuration
REDIS_ENABLED=true
REDIS_SIZE="10GB"
REDIS_HIGH_AVAILABILITY=true
MEMCACHED_ENABLED=true
MEMCACHED_SIZE="5GB"

# Queue Configuration
PUBSUB_ENABLED=true
MAX_QUEUE_SIZE=100000
WORKER_COUNT=10
ENABLE_DEAD_LETTER_QUEUE=true

# Secrets Management
USE_SECRET_MANAGER=true
SECRET_ROTATION_DAYS=90
ENABLE_SECRET_SCANNING=true

# Compliance
REQUIRE_ENCRYPTION_AT_REST=true
REQUIRE_ENCRYPTION_IN_TRANSIT=true
AUDIT_LOGGING_ENABLED=true
ENABLE_ACCESS_TRANSPARENCY=true
ENABLE_DATA_LOSS_PREVENTION=true
COMPLIANCE_STANDARDS="SOC2,ISO27001,GDPR"

# Disaster Recovery
ENABLE_CROSS_REGION_BACKUP=true
BACKUP_REGIONS="us-east1,europe-west1"
RPO_MINUTES=15  # Recovery Point Objective
RTO_MINUTES=60  # Recovery Time Objective

# Terraform State
TF_STATE_BUCKET="tf-state-whai-genesis-prod"
TF_STATE_PREFIX="genesis/prod"
TF_STATE_ENCRYPTION=true
TF_STATE_VERSIONING=true

# Container Registry
CONTAINER_REGISTRY="us-central1-docker.pkg.dev"
ARTIFACT_REPOSITORY="whai-genesis-prod/containers"
ENABLE_VULNERABILITY_SCANNING=true
ENABLE_BINARY_AUTHORIZATION=true

# Tags and Labels
DEFAULT_LABELS="environment=prod,project=genesis,managed-by=terraform,criticality=high"
DEFAULT_TAGS="whai-genesis-prod,production"

# Notification Settings
ALERT_EMAIL="${PROD_ALERT_EMAIL}"
ALERT_SMS="${PROD_ALERT_SMS}"
ESCALATION_POLICY="production-oncall"

# SLA Configuration
TARGET_UPTIME="99.9"
ERROR_BUDGET_PERCENT="0.1"

# Maintenance Windows
MAINTENANCE_WINDOW_DAY="sunday"
MAINTENANCE_WINDOW_HOUR="03"
MAINTENANCE_WINDOW_DURATION="4"

# Export environment type for scripts
export ENVIRONMENT_TYPE

# Production confirmation required
export CONFIRM_PROD="${CONFIRM_PROD:-NOT_SET}"