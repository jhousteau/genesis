[tool:pytest]
# Genesis Testing Configuration - pytest.ini

# Test discovery
testpaths = 
    bootstrap/tests
    genesis-cli/tests
    shared-python/tests
    smart-commit/tests
    worktree-tools/tests
    testing/tests

python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Output and verbosity
addopts = 
    --verbose
    --tb=short
    --strict-markers
    --strict-config
    --cov=src
    --cov=bootstrap/src
    --cov=genesis-cli/src
    --cov=shared-python/src
    --cov=smart-commit/src
    --cov=worktree-tools/src
    --cov-report=term-missing
    --cov-report=html:coverage/
    --cov-report=xml:coverage.xml
    --cov-fail-under=80

# Warnings
filterwarnings =
    error
    ignore::UserWarning
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Markers
markers =
    unit: Unit tests for individual components
    integration: Integration tests across components  
    e2e: End-to-end tests for complete workflows
    ai_safety: Tests for AI safety constraints (file counts, isolation)
    slow: Tests that take more than 2 seconds
    requires_git: Tests that need git operations
    requires_network: Tests that need network access

# Test isolation
cache_dir = .pytest_cache
tmp_path_retention_count = 3
tmp_path_retention_policy = failed

# Async support
asyncio_mode = auto